{"version":3,"sources":["webpack:///worker.js","webpack:///webpack/bootstrap f18daebc0741bcb94c89?1bdf","webpack:///./src/worker/index.ts","webpack:///../culling-log-parser/dist/index.es5.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","169","fakeProgressIncrementor","remaining","fakeProgress","handleFile","file","progressHandler","successHandler","errorHandler","reader","FileReader","readAsText","onprogress","progressEvent","progress","lengthComputable","loaded","total","console","log","onload","event","result","culling_log_parser_1","ignoreBots","e","onerror","fastConcat","array","otherArray","forEach","v","push","onmessage","files","data","totalResult","end","Date","entries","games","meta","lines","relevant","players","start","summary","damage","DamageSummary","deaths","kills","losses","wins","fileSerialHandler","index","arrayProgress","length","postMessage","type","output","beforeLast","warn","keys","player","addOtherSummary","killed","died","timesMet","makeCloneable","error","message","stack","85","t","this","a","TypeError","writable","key","amount","averageRange","count","rangeSum","backstabCount","headshotCount","meleeBlockCount","rangeBlockCount","rangeBlockAmount","arguments","isBlocked","range","isBackstab","isHeadshot","isRanged","block","summaries","afk","dealt","received","melee","ranged","isAFK","isReceived","addDamage","addOtherSubSummary","assign","indexOf","isRegionsType","u","r","h","split","moduleName","parse","date","interesting","isGameStart","version","api","game","region","addEntry","isGameEnd","isKill","isDeath","isWin","isLoss","info","add","isFinished","g","getResult","finish","getSummary","damageSummary","damageInstances","deathWaitingForDamage","isBotGame","gameType","otherPlayer","isNaN","score","Symbol","iterator","next","done","mode","VictoryGameMode_Solo.VictoryGameMode_Solo_C","VictoryGameMode.VictoryGameMode_C","VictoryGameMode_Lightning.VictoryGameMode_Lightning_C","VictoryGameMode_Custom.VictoryGameMode_Custom_C","VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C","fullLine","isDealt","timestamp","level","parseDate","parseModuleName","parseVersion","parseRegion","parseGameState","parseGameType","parseIsBotGame","parseDamage","parseRankScoring","match","substr","replace","parseInt","getTime","ICullingParser"],"mappings":"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","file":"worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 169);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 169:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\"use strict\";\n\nvar culling_log_parser_1 = __webpack_require__(85);\n// fake loading bar 4Head\nvar fakeProgress = 0;\nfunction fakeProgressIncrementor() {\n    var remaining = 100 - fakeProgress;\n    fakeProgress += remaining * 0.01;\n    return fakeProgress;\n}\n;\nfunction handleFile(file, progressHandler, successHandler, errorHandler) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onprogress = function (progressEvent) {\n        var progress = 0;\n        if (progressEvent.lengthComputable) {\n            progress = progressEvent.loaded / progressEvent.total * 100;\n        } else {\n            // fake it!\n            console.log('Faking progress');\n            progress = fakeProgressIncrementor();\n        }\n        progress = progress / 2; // divide by two, because these events only count for the filereading itself for now\n        progressHandler.call(reader, progress);\n    };\n    reader.onload = function (event) {\n        var result = void 0;\n        try {\n            result = culling_log_parser_1.default(reader.result, { ignoreBots: true });\n        } catch (e) {\n            errorHandler.call(reader, e);\n            return;\n        }\n        successHandler.call(reader, result);\n    };\n    reader.onerror = errorHandler;\n}\nfunction fastConcat(array, otherArray) {\n    otherArray.forEach(function (v) {\n        return array.push(v);\n    });\n}\nonmessage = function onmessage(event) {\n    var files = event.data;\n    var totalResult = {\n        end: new Date(0),\n        entries: [],\n        games: [],\n        meta: {\n            lines: {\n                relevant: 0,\n                total: 0\n            }\n        },\n        players: {},\n        start: new Date(),\n        summary: {\n            damage: new culling_log_parser_1.DamageSummary(),\n            deaths: 0,\n            kills: 0,\n            losses: 0,\n            wins: 0\n        }\n    };\n    var fileSerialHandler = function fileSerialHandler(index) {\n        var arrayProgress = index / files.length * 100;\n        handleFile(files[index], function (progress) {\n            postMessage({\n                progress: arrayProgress + progress / files.length,\n                type: 'progress'\n            });\n        }, function (output) {\n            try {\n                var beforeLast = false;\n                if (output.start < totalResult.start) {\n                    totalResult.start = output.start;\n                    beforeLast = true;\n                }\n                if (output.end > totalResult.end) {\n                    if (index > 0 && beforeLast) {\n                        console.warn('A log file was before and after the already parsed output.', files[index - 1].name, 'output.end', output.end, 'output.start', output.start, 'totalResult.end', totalResult.end, 'totalResult.start', totalResult.start);\n                    }\n                    totalResult.end = output.end;\n                }\n                fastConcat(totalResult.entries, output.entries);\n                fastConcat(totalResult.games, output.games);\n                totalResult.meta.lines.relevant += output.meta.lines.relevant;\n                totalResult.meta.lines.total += output.meta.lines.total;\n                Object.keys(output.players).forEach(function (name) {\n                    var player = totalResult.players[name];\n                    if (!player) {\n                        player = output.players[name];\n                    } else {\n                        player.damage = player.damage.addOtherSummary(output.players[name].damage);\n                        player.killed += output.players[name].killed;\n                        player.died += output.players[name].died;\n                        player.timesMet += output.players[name].timesMet;\n                    }\n                });\n                totalResult.summary.damage = totalResult.summary.damage.addOtherSummary(output.summary.damage);\n                totalResult.summary.deaths += output.summary.deaths;\n                totalResult.summary.kills += output.summary.kills;\n                totalResult.summary.losses += output.summary.losses;\n                totalResult.summary.wins += output.summary.wins;\n                index++;\n                if (files[index]) {\n                    // get more files\n                    fileSerialHandler(index);\n                } else {\n                    postMessage({\n                        output: culling_log_parser_1.makeCloneable(totalResult),\n                        type: 'done'\n                    });\n                }\n            } catch (error) {\n                postMessage({\n                    error: error.message,\n                    stack: error.stack,\n                    type: 'error'\n                });\n            }\n        }, function (error) {\n            console.log('Posting error');\n            postMessage({\n                error: error.message,\n                stack: error.stack,\n                type: 'error'\n            });\n        });\n    };\n    fileSerialHandler(0);\n    postMessage({\n        type: 'started'\n    });\n};\n\n/***/ },\n\n/***/ 85:\n/***/ function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"culling-log-parser\"]=t():e[\"culling-log-parser\"]=t()}(this,function(){return function(e){function t(i){if(a[i])return a[i].exports;var s=a[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,t,a){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var a=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return t.d(a,\"a\",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=6)}([function(e,t){\"use strict\";function a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),s=function(){function e(){a(this,e),this.amount=0,this.averageRange=0,this.count=0,this.rangeSum=0,this.backstabCount=0,this.headshotCount=0,this.meleeBlockCount=0,this.rangeBlockCount=0,this.rangeBlockAmount=0}return i(e,[{key:\"addDamage\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments[1];t.isBlocked||(this.count++,this.amount+=e),this.rangeSum+=t.range,this.count>0&&(this.averageRange=this.rangeSum/this.count),t.isBackstab&&this.backstabCount++,t.isHeadshot&&this.headshotCount++,t.isBlocked&&(t.isRanged?(this.rangeBlockAmount+=e*(t.block/100),this.rangeBlockCount++):this.meleeBlockCount++)}},{key:\"addOtherSubSummary\",value:function(t){var a=new e;return a.amount=this.amount+t.amount,a.count=this.count+t.count,this.count>0||t.count>0?a.averageRange=(this.rangeSum+t.rangeSum)/(this.count+t.count):a.averageRange=0,a.backstabCount=this.backstabCount+t.backstabCount,a.headshotCount=this.headshotCount+t.headshotCount,a.meleeBlockCount=this.meleeBlockCount+t.meleeBlockCount,a.rangeBlockAmount=this.rangeBlockAmount+t.rangeBlockAmount,a.rangeBlockCount=this.rangeBlockCount+t.rangeBlockCount,a}}]),e}(),n=function(){function e(){a(this,e),this.summaries={afk:{dealt:new s,received:new s},melee:{dealt:new s,received:new s},ranged:{dealt:new s,received:new s}}}return i(e,[{key:\"add\",value:function(e){var t=this.summaries.melee;e.isRanged&&(t=e.isAFK?this.summaries.afk:this.summaries.ranged);var a=t.dealt,i=e.dealt;e.isReceived&&(a=t.received,i=e.received),a.addDamage(i,e)}},{key:\"addOtherSummary\",value:function(t){var a=new e;return a.summaries={afk:{dealt:this.summaries.afk.dealt.addOtherSubSummary(t.summaries.afk.dealt),received:this.summaries.afk.received.addOtherSubSummary(t.summaries.afk.received)},melee:{dealt:this.summaries.melee.dealt.addOtherSubSummary(t.summaries.melee.dealt),received:this.summaries.melee.received.addOtherSubSummary(t.summaries.melee.received)},ranged:{dealt:this.summaries.ranged.dealt.addOtherSubSummary(t.summaries.ranged.dealt),received:this.summaries.ranged.received.addOtherSubSummary(t.summaries.ranged.received)}},a}},{key:\"getSummary\",value:function(){var e=this.summaries.melee.dealt.addOtherSubSummary(this.summaries.ranged.dealt);e=e.addOtherSubSummary(this.summaries.afk.dealt);var t=this.summaries.melee.received.addOtherSubSummary(this.summaries.ranged.received);t=t.addOtherSubSummary(this.summaries.afk.received);var a=e.count+t.count,i=e.rangeSum+t.rangeSum,s=Object.assign({},this.summaries,{averageRange:i/a},{dealt:e,received:t});return s}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=n},function(e,t){\"use strict\";function a(e){return i.indexOf(e)!==-1}var i=[\"eu\",\"us-east\",\"us-west\",\"ocn\"];t.isRegionsType=a},function(e,t,a){\"use strict\";function i(e){var t=arguments.length<=1||void 0===arguments[1]?{ignoreBots:!1}:arguments[1],a=[],i={end:new Date,entries:[],games:[],meta:{lines:{relevant:0,total:0}},players:{},start:new Date,summary:{damage:new s[\"default\"],deaths:0,kills:0,losses:0,wins:0}},u=!1,l=new r[\"default\"],m=\"\",d=0,h=e.split(\"\\n\");return h.forEach(function(e,h){i.meta.lines.total++;var c=new n[\"default\"](e);if(a.indexOf(c.moduleName)===-1&&a.push(c.moduleName),c.parse(t),!u&&c.date&&(u=!0,i.start=c.date),c.date&&(i.end=c.date),c.interesting){if(i.meta.lines.relevant++,c.isGameStart&&(l=new r[\"default\"]),0!==c.version.api)return d=c.version.api,o.indexOf(c.version.api)||console.warn(\"culling-log-parser: WARNING! This log is from a game version that has not been tested!\",c.version.api),void(0!==c.version.api&&c.version.api<92253?console.log(\"culling-log-parser: Parsing log with old version that doesn't have reliable kills, deaths, wins or losses.\"):0!==c.version.api&&console.log(\"Version\",c.version.api));if(\"\"===c.version.game){if(0===d&&c.isGameStart&&console.warn(\"culling-log-parser: WARNING! This log does not appear to have a recognized version line.\"),c.region&&(m=c.region),l.addEntry(c),!c.isGameEnd&&!l.type||\"unknown\"===l.type||\"bot\"===l.type)return void(\"bot\"===l.type||c.isGameStart||c.isGameEnd||c.region||console.log(\"Unknown game type, ignoring possibly interesting entry\",l.type,c));if(c.isKill&&i.summary.kills++,c.isDeath&&i.summary.deaths++,c.isWin&&i.summary.wins++,c.isLoss&&i.summary.losses++,c.damage.isBlocked&&c.damage.isBackstab&&console.warn(\"culling-log-parser: WARNING! Someone blocked a backstab?!?!?!?!\"),c.damage.isBlocked&&c.damage.isAFK&&console.info(\"culling-log-parser: Someone blocked a damage instance from stupid range. Rare but can happen.\"),i.summary.damage.add(c.damage),l.isFinished){var g=l.getResult();Object.keys(g.players).forEach(function(e){i.players[e]||(i.players[e]={damage:new s[\"default\"],died:0,killed:0,timesMet:0}),i.players[e].damage=i.players[e].damage.addOtherSummary(l.players[e]),i.players[e].timesMet++}),i.games.push(g),l=new r[\"default\"](m)}i.entries.push(c)}}}),l.start&&!l.isFinished&&(l.finish(i.entries[i.entries.length-1]),i.games.push(l.getResult())),i}var s=a(0),n=a(5),r=a(4),o=[];Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=i},function(e,t){\"use strict\";function a(e){var t={entries:e.entries,games:e.games,meta:e.meta,players:{},summary:{damage:e.summary.damage.getSummary(),deaths:e.summary.deaths,kills:e.summary.kills,losses:e.summary.losses,wins:e.summary.wins}};return Object.keys(e.players).forEach(function(a){t.players[a]={damage:e.players[a].damage.getSummary(),died:e.players[a].died,killed:e.players[a].killed,timesMet:e.players[a].timesMet}}),t}Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=a},function(e,t,a){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=a(0),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?\"\":arguments[0];i(this,e),this.start=null,this.end=null,this.players={},this.damageSummary=new n[\"default\"],this.damageInstances=[],this.isWin=!1,this.isFinished=!1,this.deathWaitingForDamage=!1,this.type=\"\",this.region=t,this.isBotGame=!0}return s(e,[{key:\"addEntry\",value:function(e){e.isGameStart&&(this.start=e.date||new Date),this.addDamage(e),\"\"!==e.gameType.game&&(this.type=e.gameType.game),e.region&&(this.region=e.region),this.deathWaitingForDamage&&e.damage.isReceived?this.finish(e):e.isWin?this.isWin=!0:e.isDeath?this.deathWaitingForDamage=!0:this.start&&e.isGameEnd&&this.finish(e)}},{key:\"addDamage\",value:function(e){(e.damage.dealt||e.damage.received||e.damage.isBlocked)&&(this.damageSummary.add(e.damage),this.players[e.otherPlayer]||(this.players[e.otherPlayer]=new n[\"default\"]),this.players[e.otherPlayer].add(e.damage),this.damageInstances.push(Object.assign({name:e.otherPlayer},e.damage)))}},{key:\"finish\",value:function(e){e.date&&(this.end=e.date),isNaN(e.score)||(this.score=e.score),this.isFinished=!0}},{key:\"getResult\",value:function(){var e=Object.keys(this.players),t={},a=!0,i=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var o=n.value;t[o]={damage:this.players[o].getSummary(),died:!1,killed:!1}}}catch(u){i=!0,s=u}finally{try{!a&&r[\"return\"]&&r[\"return\"]()}finally{if(i)throw s}}return{damageInstances:this.damageInstances,damageSummary:this.damageSummary.getSummary(),end:this.end,isWin:this.isWin,mode:this.type,players:t,region:this.region,score:this.score,start:this.start}}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=r},function(e,t,a){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=a(1),r={\"VictoryGameMode_Solo.VictoryGameMode_Solo_C\":\"solo\",\"VictoryGameMode.VictoryGameMode_C\":\"team\",\"VictoryGameMode_Lightning.VictoryGameMode_Lightning_C\":\"lightning\",\"VictoryGameMode_Custom.VictoryGameMode_Custom_C\":\"custom\",\"VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C\":\"trials\"},o=function(){function e(t){i(this,e),this.fullLine=t,this.damage={block:0,dealt:0,isAFK:!1,isBackstab:!1,isBlocked:!1,isDealt:!0,isHeadshot:!1,isRanged:!1,isReceived:!1,range:0,received:0,timestamp:0},this.isGameStart=!1,this.isGameEnd=!1,this.isWin=!1,this.isLoss=!1,this.otherPlayer=\"\",this.isKill=!1,this.isDeath=!1,this.score=0,this.region=\"\",this.version={api:0,game:\"\"},this.gameType={game:\"\",level:\"\"},this.interesting=!1,this.date=this.parseDate(),this.moduleName=this.parseModuleName()}return s(e,[{key:\"parse\",value:function(e){this.parseVersion(),this.parseRegion(),this.parseGameState(),this.parseGameType(),this.parseIsBotGame(),this.parseDamage(e.ignoreBots),this.parseRankScoring()}},{key:\"parseDate\",value:function(){if(!this.fullLine.match(/^\\[[\\d\\.\\-:]+]/))return null;var e=this.fullLine.substr(1,4),t=this.fullLine.substr(6,2),a=this.fullLine.substr(9,2),i=this.fullLine.substr(12,2),s=this.fullLine.substr(15,2),n=this.fullLine.substr(18,2),r=this.fullLine.substr(21,3);return new Date(e+\"-\"+t+\"-\"+a+\"T\"+i+\":\"+s+\":\"+n+\".\"+r+\"Z\")}},{key:\"parseModuleName\",value:function(){var e=this.fullLine;this.date&&(e=e.substr(30));var t=e.match(/^[^\\s]+/);if(!t)return\"NoModuleFound\";var a=t[0].replace(/:$/,\"\");return a}},{key:\"parseVersion\",value:function(){if(\"LogInit\"===this.moduleName){var e=this.fullLine.substr(9);this.date&&(e=this.fullLine.substr(39)),0===e.indexOf(\"Version:\")?(this.version.game=e.substr(18),this.interesting=!0):0===e.indexOf(\"API Version:\")&&(this.version.api=parseInt(e.substr(13),10),this.interesting=!0)}}},{key:\"parseRegion\",value:function(){if(\"FrontEnd:Display\"===this.moduleName){var e=this.fullLine.substr(48),t=e.match(/appid is [\\d]+, using url https?:\\/\\/clientweb-([^\\.]+).theculling.net\\/api/i);if(t){this.interesting=!0;var a=t[1];n.isRegionsType(a)?this.region=a:this.region=\"unknown\"}}}},{key:\"parseGameState\",value:function(){if(\"LogOnline\"===this.moduleName){var e=this.fullLine.substr(41);e.indexOf(\"GotoState: NewState: Playing\")!==-1?(this.interesting=!0,this.isGameStart=!0):e.indexOf(\"GotoState: NewState: MainMenu\")!==-1&&(this.isGameEnd=!0,this.interesting=!0)}}},{key:\"parseGameType\",value:function(){if(\"LogNet\"===this.moduleName){var e=this.fullLine.substr(38);if(e.indexOf(\"Welcomed by server\")!==-1){var t=e.match(/\\(Level: \\/Game\\/Maps\\/([^,]+), Game: \\/Game\\/Blueprints\\/GameMode\\/([^\\)]+)\\)/i);if(!t)return void console.warn(\"culling-log-parser: WARNING! Found a server welcome that didn't match expected format\",this.fullLine);this.interesting=!0;var a=r[t[2]];a||(console.warn(\"culling-log-parser: WARNING! Found an unknown game mode.\",t[2],this.fullLine),a=\"unknown\"),this.gameType={game:a,level:t[1]}}}}},{key:\"parseIsBotGame\",value:function(){if(\"LogLoad\"===this.moduleName){var e=this.fullLine.substr(38);e.match(/LoadMap: (?:[\\d\\.]+)?\\/?\\/Game\\/Maps\\/(?:Tutorial|Jungle\\/Jungle_P\\?bEnableBots)/i)&&(this.gameType.game=\"bot\",this.interesting=!0)}}},{key:\"parseDamage\",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(\"VictoryDamage:Display\"===this.moduleName){var t=this.fullLine.substr(53),a=t.match(/You hit (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i);if(a||(this.damage.isDealt=!1,this.damage.isReceived=!0,a=t.match(/Struck by (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i)),!a)return void console.error(\"VictoryDamage:Display with wrong format\",t);if(this.interesting=!0,this.otherPlayer=a[1],e&&this.otherPlayer.match(/<BOT>[\\d]-[A-F0-9]{32}/))return void(this.interesting=!1);this.date&&(this.damage.timestamp=this.date.getTime());var i=parseInt(a[2],10);this.damage.isDealt?this.damage.dealt=i:this.damage.received=i,this.damage.range=parseInt(a[3],10),this.damage.range>3&&(this.damage.isRanged=!0,this.damage.range>300&&(this.damage.isAFK=!0));var s=t.match(/BLOCKED ([\\d]+)%/i);s&&(this.damage.isBlocked=!0,this.damage.block=parseInt(s[1],10),50===this.damage.block?this.damage.isRanged=!0:100!==this.damage.block&&25!==this.damage.block&&console.info(\"culling-log-parser: Found abnormal block value!\",s[1],this.fullLine)),t.match(\"BACKSTAB!\")&&(this.damage.isBackstab=!0),t.match(\"HEADSHOT!\")&&(this.damage.isHeadshot=!0)}}},{key:\"parseRankScoring\",value:function(){if(\"LogOnline:Warning\"===this.moduleName){var e=this.fullLine.substr(49),t=e.match(/RankScoring (win|loss|kill|death): (-?[\\d]+)/i);if(t)switch(this.interesting=!0,this.score=parseInt(t[2],10),t[1]){case\"win\":this.isWin=!0;break;case\"loss\":this.isLoss=!0;break;case\"kill\":this.isKill=!0;break;case\"death\":this.isDeath=!0;break;default:console.error(\"Found unknown RankScoring value:\"+e)}}}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=o},function(e,t,a){\"use strict\";var i=a(2),s=a(0);t.DamageSummary=s[\"default\"];var n=a(3);t.makeCloneable=n[\"default\"];var r=a(1);t.ICullingParser=r,Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=i[\"default\"]}])});\n//# sourceMappingURL=index.es5.js.map\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// worker.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 169);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f18daebc0741bcb94c89","\"use strict\";\nvar culling_log_parser_1 = require('culling-log-parser');\n// fake loading bar 4Head\nvar fakeProgress = 0;\nfunction fakeProgressIncrementor() {\n    var remaining = 100 - fakeProgress;\n    fakeProgress += remaining * 0.01;\n    return fakeProgress;\n}\n;\nfunction handleFile(file, progressHandler, successHandler, errorHandler) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onprogress = function (progressEvent) {\n        var progress = 0;\n        if (progressEvent.lengthComputable) {\n            progress = progressEvent.loaded / progressEvent.total * 100;\n        }\n        else {\n            // fake it!\n            console.log('Faking progress');\n            progress = fakeProgressIncrementor();\n        }\n        progress = progress / 2; // divide by two, because these events only count for the filereading itself for now\n        progressHandler.call(reader, progress);\n    };\n    reader.onload = function (event) {\n        var result = void 0;\n        try {\n            result = culling_log_parser_1.default(reader.result, { ignoreBots: true });\n        }\n        catch (e) {\n            errorHandler.call(reader, e);\n            return;\n        }\n        successHandler.call(reader, result);\n    };\n    reader.onerror = errorHandler;\n}\nfunction fastConcat(array, otherArray) {\n    otherArray.forEach(function (v) {\n        return array.push(v);\n    });\n}\nonmessage = function onmessage(event) {\n    var files = event.data;\n    var totalResult = {\n        end: new Date(0),\n        entries: [],\n        games: [],\n        meta: {\n            lines: {\n                relevant: 0,\n                total: 0\n            }\n        },\n        players: {},\n        start: new Date(),\n        summary: {\n            damage: new culling_log_parser_1.DamageSummary(),\n            deaths: 0,\n            kills: 0,\n            losses: 0,\n            wins: 0\n        }\n    };\n    var fileSerialHandler = function fileSerialHandler(index) {\n        var arrayProgress = index / files.length * 100;\n        handleFile(files[index], function (progress) {\n            postMessage({\n                progress: arrayProgress + progress / files.length,\n                type: 'progress'\n            });\n        }, function (output) {\n            try {\n                var beforeLast = false;\n                if (output.start < totalResult.start) {\n                    totalResult.start = output.start;\n                    beforeLast = true;\n                }\n                if (output.end > totalResult.end) {\n                    if (index > 0 && beforeLast) {\n                        console.warn('A log file was before and after the already parsed output.', files[index - 1].name, 'output.end', output.end, 'output.start', output.start, 'totalResult.end', totalResult.end, 'totalResult.start', totalResult.start);\n                    }\n                    totalResult.end = output.end;\n                }\n                fastConcat(totalResult.entries, output.entries);\n                fastConcat(totalResult.games, output.games);\n                totalResult.meta.lines.relevant += output.meta.lines.relevant;\n                totalResult.meta.lines.total += output.meta.lines.total;\n                Object.keys(output.players).forEach(function (name) {\n                    var player = totalResult.players[name];\n                    if (!player) {\n                        player = output.players[name];\n                    }\n                    else {\n                        player.damage = player.damage.addOtherSummary(output.players[name].damage);\n                        player.killed += output.players[name].killed;\n                        player.died += output.players[name].died;\n                        player.timesMet += output.players[name].timesMet;\n                    }\n                });\n                totalResult.summary.damage = totalResult.summary.damage.addOtherSummary(output.summary.damage);\n                totalResult.summary.deaths += output.summary.deaths;\n                totalResult.summary.kills += output.summary.kills;\n                totalResult.summary.losses += output.summary.losses;\n                totalResult.summary.wins += output.summary.wins;\n                index++;\n                if (files[index]) {\n                    // get more files\n                    fileSerialHandler(index);\n                }\n                else {\n                    postMessage({\n                        output: culling_log_parser_1.makeCloneable(totalResult),\n                        type: 'done'\n                    });\n                }\n            }\n            catch (error) {\n                postMessage({\n                    error: error.message,\n                    stack: error.stack,\n                    type: 'error'\n                });\n            }\n        }, function (error) {\n            console.log('Posting error');\n            postMessage({\n                error: error.message,\n                stack: error.stack,\n                type: 'error'\n            });\n        });\n    };\n    fileSerialHandler(0);\n    postMessage({\n        type: 'started'\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/worker/index.ts","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"culling-log-parser\"]=t():e[\"culling-log-parser\"]=t()}(this,function(){return function(e){function t(i){if(a[i])return a[i].exports;var s=a[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,t,a){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var a=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return t.d(a,\"a\",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=6)}([function(e,t){\"use strict\";function a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),s=function(){function e(){a(this,e),this.amount=0,this.averageRange=0,this.count=0,this.rangeSum=0,this.backstabCount=0,this.headshotCount=0,this.meleeBlockCount=0,this.rangeBlockCount=0,this.rangeBlockAmount=0}return i(e,[{key:\"addDamage\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments[1];t.isBlocked||(this.count++,this.amount+=e),this.rangeSum+=t.range,this.count>0&&(this.averageRange=this.rangeSum/this.count),t.isBackstab&&this.backstabCount++,t.isHeadshot&&this.headshotCount++,t.isBlocked&&(t.isRanged?(this.rangeBlockAmount+=e*(t.block/100),this.rangeBlockCount++):this.meleeBlockCount++)}},{key:\"addOtherSubSummary\",value:function(t){var a=new e;return a.amount=this.amount+t.amount,a.count=this.count+t.count,this.count>0||t.count>0?a.averageRange=(this.rangeSum+t.rangeSum)/(this.count+t.count):a.averageRange=0,a.backstabCount=this.backstabCount+t.backstabCount,a.headshotCount=this.headshotCount+t.headshotCount,a.meleeBlockCount=this.meleeBlockCount+t.meleeBlockCount,a.rangeBlockAmount=this.rangeBlockAmount+t.rangeBlockAmount,a.rangeBlockCount=this.rangeBlockCount+t.rangeBlockCount,a}}]),e}(),n=function(){function e(){a(this,e),this.summaries={afk:{dealt:new s,received:new s},melee:{dealt:new s,received:new s},ranged:{dealt:new s,received:new s}}}return i(e,[{key:\"add\",value:function(e){var t=this.summaries.melee;e.isRanged&&(t=e.isAFK?this.summaries.afk:this.summaries.ranged);var a=t.dealt,i=e.dealt;e.isReceived&&(a=t.received,i=e.received),a.addDamage(i,e)}},{key:\"addOtherSummary\",value:function(t){var a=new e;return a.summaries={afk:{dealt:this.summaries.afk.dealt.addOtherSubSummary(t.summaries.afk.dealt),received:this.summaries.afk.received.addOtherSubSummary(t.summaries.afk.received)},melee:{dealt:this.summaries.melee.dealt.addOtherSubSummary(t.summaries.melee.dealt),received:this.summaries.melee.received.addOtherSubSummary(t.summaries.melee.received)},ranged:{dealt:this.summaries.ranged.dealt.addOtherSubSummary(t.summaries.ranged.dealt),received:this.summaries.ranged.received.addOtherSubSummary(t.summaries.ranged.received)}},a}},{key:\"getSummary\",value:function(){var e=this.summaries.melee.dealt.addOtherSubSummary(this.summaries.ranged.dealt);e=e.addOtherSubSummary(this.summaries.afk.dealt);var t=this.summaries.melee.received.addOtherSubSummary(this.summaries.ranged.received);t=t.addOtherSubSummary(this.summaries.afk.received);var a=e.count+t.count,i=e.rangeSum+t.rangeSum,s=Object.assign({},this.summaries,{averageRange:i/a},{dealt:e,received:t});return s}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=n},function(e,t){\"use strict\";function a(e){return i.indexOf(e)!==-1}var i=[\"eu\",\"us-east\",\"us-west\",\"ocn\"];t.isRegionsType=a},function(e,t,a){\"use strict\";function i(e){var t=arguments.length<=1||void 0===arguments[1]?{ignoreBots:!1}:arguments[1],a=[],i={end:new Date,entries:[],games:[],meta:{lines:{relevant:0,total:0}},players:{},start:new Date,summary:{damage:new s[\"default\"],deaths:0,kills:0,losses:0,wins:0}},u=!1,l=new r[\"default\"],m=\"\",d=0,h=e.split(\"\\n\");return h.forEach(function(e,h){i.meta.lines.total++;var c=new n[\"default\"](e);if(a.indexOf(c.moduleName)===-1&&a.push(c.moduleName),c.parse(t),!u&&c.date&&(u=!0,i.start=c.date),c.date&&(i.end=c.date),c.interesting){if(i.meta.lines.relevant++,c.isGameStart&&(l=new r[\"default\"]),0!==c.version.api)return d=c.version.api,o.indexOf(c.version.api)||console.warn(\"culling-log-parser: WARNING! This log is from a game version that has not been tested!\",c.version.api),void(0!==c.version.api&&c.version.api<92253?console.log(\"culling-log-parser: Parsing log with old version that doesn't have reliable kills, deaths, wins or losses.\"):0!==c.version.api&&console.log(\"Version\",c.version.api));if(\"\"===c.version.game){if(0===d&&c.isGameStart&&console.warn(\"culling-log-parser: WARNING! This log does not appear to have a recognized version line.\"),c.region&&(m=c.region),l.addEntry(c),!c.isGameEnd&&!l.type||\"unknown\"===l.type||\"bot\"===l.type)return void(\"bot\"===l.type||c.isGameStart||c.isGameEnd||c.region||console.log(\"Unknown game type, ignoring possibly interesting entry\",l.type,c));if(c.isKill&&i.summary.kills++,c.isDeath&&i.summary.deaths++,c.isWin&&i.summary.wins++,c.isLoss&&i.summary.losses++,c.damage.isBlocked&&c.damage.isBackstab&&console.warn(\"culling-log-parser: WARNING! Someone blocked a backstab?!?!?!?!\"),c.damage.isBlocked&&c.damage.isAFK&&console.info(\"culling-log-parser: Someone blocked a damage instance from stupid range. Rare but can happen.\"),i.summary.damage.add(c.damage),l.isFinished){var g=l.getResult();Object.keys(g.players).forEach(function(e){i.players[e]||(i.players[e]={damage:new s[\"default\"],died:0,killed:0,timesMet:0}),i.players[e].damage=i.players[e].damage.addOtherSummary(l.players[e]),i.players[e].timesMet++}),i.games.push(g),l=new r[\"default\"](m)}i.entries.push(c)}}}),l.start&&!l.isFinished&&(l.finish(i.entries[i.entries.length-1]),i.games.push(l.getResult())),i}var s=a(0),n=a(5),r=a(4),o=[];Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=i},function(e,t){\"use strict\";function a(e){var t={entries:e.entries,games:e.games,meta:e.meta,players:{},summary:{damage:e.summary.damage.getSummary(),deaths:e.summary.deaths,kills:e.summary.kills,losses:e.summary.losses,wins:e.summary.wins}};return Object.keys(e.players).forEach(function(a){t.players[a]={damage:e.players[a].damage.getSummary(),died:e.players[a].died,killed:e.players[a].killed,timesMet:e.players[a].timesMet}}),t}Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=a},function(e,t,a){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=a(0),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?\"\":arguments[0];i(this,e),this.start=null,this.end=null,this.players={},this.damageSummary=new n[\"default\"],this.damageInstances=[],this.isWin=!1,this.isFinished=!1,this.deathWaitingForDamage=!1,this.type=\"\",this.region=t,this.isBotGame=!0}return s(e,[{key:\"addEntry\",value:function(e){e.isGameStart&&(this.start=e.date||new Date),this.addDamage(e),\"\"!==e.gameType.game&&(this.type=e.gameType.game),e.region&&(this.region=e.region),this.deathWaitingForDamage&&e.damage.isReceived?this.finish(e):e.isWin?this.isWin=!0:e.isDeath?this.deathWaitingForDamage=!0:this.start&&e.isGameEnd&&this.finish(e)}},{key:\"addDamage\",value:function(e){(e.damage.dealt||e.damage.received||e.damage.isBlocked)&&(this.damageSummary.add(e.damage),this.players[e.otherPlayer]||(this.players[e.otherPlayer]=new n[\"default\"]),this.players[e.otherPlayer].add(e.damage),this.damageInstances.push(Object.assign({name:e.otherPlayer},e.damage)))}},{key:\"finish\",value:function(e){e.date&&(this.end=e.date),isNaN(e.score)||(this.score=e.score),this.isFinished=!0}},{key:\"getResult\",value:function(){var e=Object.keys(this.players),t={},a=!0,i=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var o=n.value;t[o]={damage:this.players[o].getSummary(),died:!1,killed:!1}}}catch(u){i=!0,s=u}finally{try{!a&&r[\"return\"]&&r[\"return\"]()}finally{if(i)throw s}}return{damageInstances:this.damageInstances,damageSummary:this.damageSummary.getSummary(),end:this.end,isWin:this.isWin,mode:this.type,players:t,region:this.region,score:this.score,start:this.start}}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=r},function(e,t,a){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=a(1),r={\"VictoryGameMode_Solo.VictoryGameMode_Solo_C\":\"solo\",\"VictoryGameMode.VictoryGameMode_C\":\"team\",\"VictoryGameMode_Lightning.VictoryGameMode_Lightning_C\":\"lightning\",\"VictoryGameMode_Custom.VictoryGameMode_Custom_C\":\"custom\",\"VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C\":\"trials\"},o=function(){function e(t){i(this,e),this.fullLine=t,this.damage={block:0,dealt:0,isAFK:!1,isBackstab:!1,isBlocked:!1,isDealt:!0,isHeadshot:!1,isRanged:!1,isReceived:!1,range:0,received:0,timestamp:0},this.isGameStart=!1,this.isGameEnd=!1,this.isWin=!1,this.isLoss=!1,this.otherPlayer=\"\",this.isKill=!1,this.isDeath=!1,this.score=0,this.region=\"\",this.version={api:0,game:\"\"},this.gameType={game:\"\",level:\"\"},this.interesting=!1,this.date=this.parseDate(),this.moduleName=this.parseModuleName()}return s(e,[{key:\"parse\",value:function(e){this.parseVersion(),this.parseRegion(),this.parseGameState(),this.parseGameType(),this.parseIsBotGame(),this.parseDamage(e.ignoreBots),this.parseRankScoring()}},{key:\"parseDate\",value:function(){if(!this.fullLine.match(/^\\[[\\d\\.\\-:]+]/))return null;var e=this.fullLine.substr(1,4),t=this.fullLine.substr(6,2),a=this.fullLine.substr(9,2),i=this.fullLine.substr(12,2),s=this.fullLine.substr(15,2),n=this.fullLine.substr(18,2),r=this.fullLine.substr(21,3);return new Date(e+\"-\"+t+\"-\"+a+\"T\"+i+\":\"+s+\":\"+n+\".\"+r+\"Z\")}},{key:\"parseModuleName\",value:function(){var e=this.fullLine;this.date&&(e=e.substr(30));var t=e.match(/^[^\\s]+/);if(!t)return\"NoModuleFound\";var a=t[0].replace(/:$/,\"\");return a}},{key:\"parseVersion\",value:function(){if(\"LogInit\"===this.moduleName){var e=this.fullLine.substr(9);this.date&&(e=this.fullLine.substr(39)),0===e.indexOf(\"Version:\")?(this.version.game=e.substr(18),this.interesting=!0):0===e.indexOf(\"API Version:\")&&(this.version.api=parseInt(e.substr(13),10),this.interesting=!0)}}},{key:\"parseRegion\",value:function(){if(\"FrontEnd:Display\"===this.moduleName){var e=this.fullLine.substr(48),t=e.match(/appid is [\\d]+, using url https?:\\/\\/clientweb-([^\\.]+).theculling.net\\/api/i);if(t){this.interesting=!0;var a=t[1];n.isRegionsType(a)?this.region=a:this.region=\"unknown\"}}}},{key:\"parseGameState\",value:function(){if(\"LogOnline\"===this.moduleName){var e=this.fullLine.substr(41);e.indexOf(\"GotoState: NewState: Playing\")!==-1?(this.interesting=!0,this.isGameStart=!0):e.indexOf(\"GotoState: NewState: MainMenu\")!==-1&&(this.isGameEnd=!0,this.interesting=!0)}}},{key:\"parseGameType\",value:function(){if(\"LogNet\"===this.moduleName){var e=this.fullLine.substr(38);if(e.indexOf(\"Welcomed by server\")!==-1){var t=e.match(/\\(Level: \\/Game\\/Maps\\/([^,]+), Game: \\/Game\\/Blueprints\\/GameMode\\/([^\\)]+)\\)/i);if(!t)return void console.warn(\"culling-log-parser: WARNING! Found a server welcome that didn't match expected format\",this.fullLine);this.interesting=!0;var a=r[t[2]];a||(console.warn(\"culling-log-parser: WARNING! Found an unknown game mode.\",t[2],this.fullLine),a=\"unknown\"),this.gameType={game:a,level:t[1]}}}}},{key:\"parseIsBotGame\",value:function(){if(\"LogLoad\"===this.moduleName){var e=this.fullLine.substr(38);e.match(/LoadMap: (?:[\\d\\.]+)?\\/?\\/Game\\/Maps\\/(?:Tutorial|Jungle\\/Jungle_P\\?bEnableBots)/i)&&(this.gameType.game=\"bot\",this.interesting=!0)}}},{key:\"parseDamage\",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(\"VictoryDamage:Display\"===this.moduleName){var t=this.fullLine.substr(53),a=t.match(/You hit (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i);if(a||(this.damage.isDealt=!1,this.damage.isReceived=!0,a=t.match(/Struck by (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i)),!a)return void console.error(\"VictoryDamage:Display with wrong format\",t);if(this.interesting=!0,this.otherPlayer=a[1],e&&this.otherPlayer.match(/<BOT>[\\d]-[A-F0-9]{32}/))return void(this.interesting=!1);this.date&&(this.damage.timestamp=this.date.getTime());var i=parseInt(a[2],10);this.damage.isDealt?this.damage.dealt=i:this.damage.received=i,this.damage.range=parseInt(a[3],10),this.damage.range>3&&(this.damage.isRanged=!0,this.damage.range>300&&(this.damage.isAFK=!0));var s=t.match(/BLOCKED ([\\d]+)%/i);s&&(this.damage.isBlocked=!0,this.damage.block=parseInt(s[1],10),50===this.damage.block?this.damage.isRanged=!0:100!==this.damage.block&&25!==this.damage.block&&console.info(\"culling-log-parser: Found abnormal block value!\",s[1],this.fullLine)),t.match(\"BACKSTAB!\")&&(this.damage.isBackstab=!0),t.match(\"HEADSHOT!\")&&(this.damage.isHeadshot=!0)}}},{key:\"parseRankScoring\",value:function(){if(\"LogOnline:Warning\"===this.moduleName){var e=this.fullLine.substr(49),t=e.match(/RankScoring (win|loss|kill|death): (-?[\\d]+)/i);if(t)switch(this.interesting=!0,this.score=parseInt(t[2],10),t[1]){case\"win\":this.isWin=!0;break;case\"loss\":this.isLoss=!0;break;case\"kill\":this.isKill=!0;break;case\"death\":this.isDeath=!0;break;default:console.error(\"Found unknown RankScoring value:\"+e)}}}}]),e}();Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=o},function(e,t,a){\"use strict\";var i=a(2),s=a(0);t.DamageSummary=s[\"default\"];var n=a(3);t.makeCloneable=n[\"default\"];var r=a(1);t.ICullingParser=r,Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=i[\"default\"]}])});\n//# sourceMappingURL=index.es5.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../culling-log-parser/dist/index.es5.js\n// module id = 85\n// module chunks = 1"],"sourceRoot":""}