{"version":3,"sources":["webpack:///worker.js","webpack:///webpack/bootstrap fa8d5e5ef265c2718b35?93f5","webpack:///./src/worker/index.ts","webpack:///../culling-log-parser/dist/index.es5.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","169","fakeProgressIncrementor","remaining","fakeProgress","handleFile","file","progressHandler","successHandler","errorHandler","reader","FileReader","readAsText","onprogress","progressEvent","progress","lengthComputable","loaded","total","console","log","onload","event","result","culling_log_parser_1","ignoreBots","e","onerror","fastConcat","array","otherArray","forEach","v","push","onmessage","files","data","totalResult","end","Date","entries","games","meta","lines","relevant","players","start","summary","damage","DamageSummary","deaths","kills","losses","wins","fileSerialHandler","index","arrayProgress","length","postMessage","type","output","beforeLast","warn","keys","player","addOtherSummary","killed","died","timesMet","makeCloneable","error","message","stack","85","a","this","t","TypeError","writable","key","amount","averageRange","count","rangeSum","backstabCount","meleeBlockCount","rangeBlockCount","rangeBlockAmount","arguments","isBlocked","range","isBackstab","isRanged","block","summaries","afk","dealt","received","melee","ranged","isAFK","isReceived","addDamage","addOtherSubSummary","assign","indexOf","isRegionsType","u","r","h","split","moduleName","parse","date","interesting","version","api","game","isGameStart","region","isKill","isDeath","isWin","isLoss","info","add","addEntry","isFinished","g","getResult","finish","getSummary","damageSummary","damageInstances","deathWaitingForDamage","gameType","isGameEnd","otherPlayer","isNaN","score","Symbol","iterator","next","done","mode","VictoryGameMode_Solo.VictoryGameMode_Solo_C","VictoryGameMode.VictoryGameMode_C","VictoryGameMode_Lightning.VictoryGameMode_Lightning_C","VictoryGameMode_Custom.VictoryGameMode_Custom_C","VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C","fullLine","isHeadshot","isDealt","timestamp","level","parseDate","parseModuleName","parseVersion","parseRegion","parseGameState","parseGameType","parseDamage","parseRankScoring","match","substr","replace","parseInt","getTime","ICullingParser"],"mappings":"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","file":"worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 169);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 169:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\"use strict\";\n\nvar culling_log_parser_1 = __webpack_require__(85);\n// fake loading bar 4Head\nvar fakeProgress = 0;\nfunction fakeProgressIncrementor() {\n    var remaining = 100 - fakeProgress;\n    fakeProgress += remaining * 0.01;\n    return fakeProgress;\n}\n;\nfunction handleFile(file, progressHandler, successHandler, errorHandler) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onprogress = function (progressEvent) {\n        var progress = 0;\n        if (progressEvent.lengthComputable) {\n            progress = progressEvent.loaded / progressEvent.total * 100;\n        } else {\n            // fake it!\n            console.log('Faking progress');\n            progress = fakeProgressIncrementor();\n        }\n        progress = progress / 2; // divide by two, because these events only count for the filereading itself for now\n        progressHandler.call(reader, progress);\n    };\n    reader.onload = function (event) {\n        var result = void 0;\n        try {\n            result = culling_log_parser_1.default(reader.result, { ignoreBots: true });\n        } catch (e) {\n            errorHandler.call(reader, e);\n            return;\n        }\n        successHandler.call(reader, result);\n    };\n    reader.onerror = errorHandler;\n}\nfunction fastConcat(array, otherArray) {\n    otherArray.forEach(function (v) {\n        return array.push(v);\n    });\n}\nonmessage = function onmessage(event) {\n    var files = event.data;\n    var totalResult = {\n        end: new Date(0),\n        entries: [],\n        games: [],\n        meta: {\n            lines: {\n                relevant: 0,\n                total: 0\n            }\n        },\n        players: {},\n        start: new Date(),\n        summary: {\n            damage: new culling_log_parser_1.DamageSummary(),\n            deaths: 0,\n            kills: 0,\n            losses: 0,\n            wins: 0\n        }\n    };\n    var fileSerialHandler = function fileSerialHandler(index) {\n        var arrayProgress = index / files.length * 100;\n        handleFile(files[index], function (progress) {\n            postMessage({\n                progress: arrayProgress + progress / files.length,\n                type: 'progress'\n            });\n        }, function (output) {\n            try {\n                var beforeLast = false;\n                if (output.start < totalResult.start) {\n                    totalResult.start = output.start;\n                    beforeLast = true;\n                }\n                if (output.end > totalResult.end) {\n                    if (index > 0 && beforeLast) {\n                        console.warn('A log file was before and after the already parsed output.', files[index - 1].name, 'output.end', output.end, 'output.start', output.start, 'totalResult.end', totalResult.end, 'totalResult.start', totalResult.start);\n                    }\n                    totalResult.end = output.end;\n                }\n                fastConcat(totalResult.entries, output.entries);\n                fastConcat(totalResult.games, output.games);\n                totalResult.meta.lines.relevant += output.meta.lines.relevant;\n                totalResult.meta.lines.total += output.meta.lines.total;\n                Object.keys(output.players).forEach(function (name) {\n                    var player = totalResult.players[name];\n                    if (!player) {\n                        player = output.players[name];\n                    } else {\n                        player.damage = player.damage.addOtherSummary(output.players[name].damage);\n                        player.killed += output.players[name].killed;\n                        player.died += output.players[name].died;\n                        player.timesMet += output.players[name].timesMet;\n                    }\n                });\n                totalResult.summary.damage = totalResult.summary.damage.addOtherSummary(output.summary.damage);\n                totalResult.summary.deaths += output.summary.deaths;\n                totalResult.summary.kills += output.summary.kills;\n                totalResult.summary.losses += output.summary.losses;\n                totalResult.summary.wins += output.summary.wins;\n                index++;\n                if (files[index]) {\n                    // get more files\n                    fileSerialHandler(index);\n                } else {\n                    postMessage({\n                        output: culling_log_parser_1.makeCloneable(totalResult),\n                        type: 'done'\n                    });\n                }\n            } catch (error) {\n                postMessage({\n                    error: error.message,\n                    stack: error.stack,\n                    type: 'error'\n                });\n            }\n        }, function (error) {\n            console.log('Posting error');\n            postMessage({\n                error: error.message,\n                stack: error.stack,\n                type: 'error'\n            });\n        });\n    };\n    fileSerialHandler(0);\n    postMessage({\n        type: 'started'\n    });\n};\n\n/***/ },\n\n/***/ 85:\n/***/ function(module, exports, __webpack_require__) {\n\n!function(e,a){ true?module.exports=a():\"function\"==typeof define&&define.amd?define([],a):\"object\"==typeof exports?exports[\"culling-log-parser\"]=a():e[\"culling-log-parser\"]=a()}(this,function(){return function(e){function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}var t={};return a.m=e,a.c=t,a.i=function(e){return e},a.d=function(e,a,t){Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p=\"\",a(a.s=6)}([function(e,a){\"use strict\";function t(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),s=function(){function e(){t(this,e),this.amount=0,this.averageRange=0,this.count=0,this.rangeSum=0,this.backstabCount=0,this.meleeBlockCount=0,this.rangeBlockCount=0,this.rangeBlockAmount=0}return i(e,[{key:\"addDamage\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],a=arguments[1];a.isBlocked||(this.count++,this.amount+=e),this.rangeSum+=a.range,this.count>0&&(this.averageRange=this.rangeSum/this.count),a.isBackstab&&this.backstabCount++,a.isBlocked&&(a.isRanged?(this.rangeBlockAmount+=e*(a.block/100),this.rangeBlockCount++):this.meleeBlockCount++)}},{key:\"addOtherSubSummary\",value:function(a){var t=new e;return t.amount=this.amount+a.amount,t.count=this.count+a.count,this.count>0||a.count>0?t.averageRange=(this.rangeSum+a.rangeSum)/(this.count+a.count):t.averageRange=0,t.backstabCount=this.backstabCount+a.backstabCount,t.meleeBlockCount=this.meleeBlockCount+a.meleeBlockCount,t.rangeBlockAmount=this.rangeBlockAmount+a.rangeBlockAmount,t.rangeBlockCount=this.rangeBlockCount+a.rangeBlockCount,t}}]),e}(),n=function(){function e(){t(this,e),this.summaries={afk:{dealt:new s,received:new s},melee:{dealt:new s,received:new s},ranged:{dealt:new s,received:new s}}}return i(e,[{key:\"add\",value:function(e){var a=this.summaries.melee;e.isRanged&&(a=e.isAFK?this.summaries.afk:this.summaries.ranged);var t=a.dealt,i=e.dealt;e.isReceived&&(t=a.received,i=e.received),t.addDamage(i,e)}},{key:\"addOtherSummary\",value:function(a){var t=new e;return t.summaries={afk:{dealt:this.summaries.afk.dealt.addOtherSubSummary(a.summaries.afk.dealt),received:this.summaries.afk.received.addOtherSubSummary(a.summaries.afk.received)},melee:{dealt:this.summaries.melee.dealt.addOtherSubSummary(a.summaries.melee.dealt),received:this.summaries.melee.received.addOtherSubSummary(a.summaries.melee.received)},ranged:{dealt:this.summaries.ranged.dealt.addOtherSubSummary(a.summaries.ranged.dealt),received:this.summaries.ranged.received.addOtherSubSummary(a.summaries.ranged.received)}},t}},{key:\"getSummary\",value:function(){var e=this.summaries.melee.dealt.addOtherSubSummary(this.summaries.ranged.dealt);e=e.addOtherSubSummary(this.summaries.afk.dealt);var a=this.summaries.melee.received.addOtherSubSummary(this.summaries.ranged.received);a=a.addOtherSubSummary(this.summaries.afk.received);var t=e.count+a.count,i=e.rangeSum+a.rangeSum,s=Object.assign({},this.summaries,{averageRange:i/t},{dealt:e,received:a});return s}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=n},function(e,a){\"use strict\";function t(e){return i.indexOf(e)!==-1}var i=[\"eu\",\"us-east\",\"us-west\",\"ocn\"];a.isRegionsType=t},function(e,a,t){\"use strict\";function i(e){var a=arguments.length<=1||void 0===arguments[1]?{ignoreBots:!1}:arguments[1],t=[],i={end:new Date,entries:[],games:[],meta:{lines:{relevant:0,total:0}},players:{},start:new Date,summary:{damage:new s[\"default\"],deaths:0,kills:0,losses:0,wins:0}},u=!1,l=new r[\"default\"],m=\"\",d=0,h=e.split(\"\\n\");return h.forEach(function(e,h){i.meta.lines.total++;var c=new n[\"default\"](e);if(t.indexOf(c.moduleName)===-1&&t.push(c.moduleName),c.parse(a),!u&&c.date&&(u=!0,i.start=c.date),c.date&&(i.end=c.date),c.interesting){if(i.meta.lines.relevant++,0!==c.version.api)return d=c.version.api,void(o.indexOf(c.version.api)||console.warn(\"culling-log-parser: WARNING! This log is from a game version that has not been tested!\",c.version.api));if(\"\"===c.version.game){if(0===d&&c.isGameStart&&console.warn(\"culling-log-parser: WARNING! This log does not appear to have a recognized version line.\"),c.region&&(m=c.region),c.isKill&&i.summary.kills++,c.isDeath&&i.summary.deaths++,c.isWin&&i.summary.wins++,c.isLoss&&i.summary.losses++,c.damage.isBlocked&&c.damage.isBackstab&&console.warn(\"culling-log-parser: WARNING! Someone blocked a backstab?!?!?!?!\"),c.damage.isBlocked&&c.damage.isAFK&&console.info(\"culling-log-parser: Someone blocked a damage instance from stupid range. Rare but can happen.\"),i.summary.damage.add(c.damage),l.addEntry(c),l.isFinished){var g=l.getResult();Object.keys(g.players).forEach(function(e){i.players[e]||(i.players[e]={damage:new s[\"default\"],died:0,killed:0,timesMet:0}),i.players[e].damage=i.players[e].damage.addOtherSummary(l.players[e]),i.players[e].timesMet++}),i.games.push(g),l=new r[\"default\"](m)}i.entries.push(c)}}}),l.start&&!l.isFinished&&(l.finish(i.entries[i.entries.length-1]),i.games.push(l.getResult())),i}var s=t(0),n=t(5),r=t(4),o=[];Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=i},function(e,a){\"use strict\";function t(e){var a={entries:e.entries,games:e.games,meta:e.meta,players:{},summary:{damage:e.summary.damage.getSummary(),deaths:e.summary.deaths,kills:e.summary.kills,losses:e.summary.losses,wins:e.summary.wins}};return Object.keys(e.players).forEach(function(t){a.players[t]={damage:e.players[t].damage.getSummary(),died:e.players[t].died,killed:e.players[t].killed,timesMet:e.players[t].timesMet}}),a}Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=t},function(e,a,t){\"use strict\";function i(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),n=t(0),r=function(){function e(){var a=arguments.length<=0||void 0===arguments[0]?\"\":arguments[0];i(this,e),this.start=null,this.end=null,this.players={},this.damageSummary=new n[\"default\"],this.damageInstances=[],this.isWin=!1,this.isFinished=!1,this.deathWaitingForDamage=!1,this.type=\"custom\",this.region=a}return s(e,[{key:\"addEntry\",value:function(e){e.isGameStart&&(this.start=e.date||new Date),this.addDamage(e),\"custom\"!==e.gameType.game&&(this.type=e.gameType.game),e.region&&(this.region=e.region),this.deathWaitingForDamage&&e.damage.isReceived?this.finish(e):e.isWin?(this.isWin=!0,this.finish(e)):e.isDeath?this.deathWaitingForDamage=!0:e.isGameEnd&&this.finish(e)}},{key:\"addDamage\",value:function(e){(e.damage.dealt||e.damage.received||e.damage.isBlocked)&&(this.damageSummary.add(e.damage),this.players[e.otherPlayer]||(this.players[e.otherPlayer]=new n[\"default\"]),this.players[e.otherPlayer].add(e.damage),this.damageInstances.push(Object.assign({name:e.otherPlayer},e.damage)))}},{key:\"finish\",value:function(e){e.date&&(this.end=e.date),isNaN(e.score)||(this.score=e.score),this.isFinished=!0}},{key:\"getResult\",value:function(){var e=Object.keys(this.players),a={},t=!0,i=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;a[o]={damage:this.players[o].getSummary(),died:!1,killed:!1}}}catch(u){i=!0,s=u}finally{try{!t&&r[\"return\"]&&r[\"return\"]()}finally{if(i)throw s}}return{damageInstances:this.damageInstances,damageSummary:this.damageSummary.getSummary(),end:this.end,isWin:this.isWin,mode:this.type,players:a,region:this.region,score:this.score,start:this.start}}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=r},function(e,a,t){\"use strict\";function i(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),n=t(1),r={\"VictoryGameMode_Solo.VictoryGameMode_Solo_C\":\"solo\",\"VictoryGameMode.VictoryGameMode_C\":\"team\",\"VictoryGameMode_Lightning.VictoryGameMode_Lightning_C\":\"lightning\",\"VictoryGameMode_Custom.VictoryGameMode_Custom_C\":\"custom\",\"VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C\":\"trials\"},o=function(){function e(a){i(this,e),this.fullLine=a,this.damage={block:0,dealt:0,isAFK:!1,isBackstab:!1,isBlocked:!1,isHeadshot:!1,isRanged:!1,isReceived:!1,isDealt:!0,range:0,received:0,timestamp:0},this.isGameStart=!1,this.isGameEnd=!1,this.isWin=!1,this.isLoss=!1,this.otherPlayer=\"\",this.isKill=!1,this.isDeath=!1,this.score=0,this.region=\"\",this.version={api:0,game:\"\"},this.gameType={game:\"custom\",level:\"\"},this.interesting=!1,this.date=this.parseDate(),this.moduleName=this.parseModuleName()}return s(e,[{key:\"parse\",value:function(e){this.parseVersion(),this.parseRegion(),this.parseGameState(),this.parseGameType(),this.parseDamage(e.ignoreBots),this.parseRankScoring()}},{key:\"parseDate\",value:function(){if(!this.fullLine.match(/^\\[[\\d\\.\\-:]+]/))return null;var e=this.fullLine.substr(1,4),a=this.fullLine.substr(6,2),t=this.fullLine.substr(9,2),i=this.fullLine.substr(12,2),s=this.fullLine.substr(15,2),n=this.fullLine.substr(18,2),r=this.fullLine.substr(21,3);return new Date(e+\"-\"+a+\"-\"+t+\"T\"+i+\":\"+s+\":\"+n+\".\"+r+\"Z\")}},{key:\"parseModuleName\",value:function(){var e=this.fullLine;this.date&&(e=e.substr(30));var a=e.match(/^[^\\s]+/);if(!a)return\"NoModuleFound\";var t=a[0].replace(/:$/,\"\");return t}},{key:\"parseVersion\",value:function(){if(\"LogInit\"===this.moduleName){var e=this.fullLine.substr(9);0===e.indexOf(\"Version:\")?(this.version.game=e.substr(18),this.interesting=!0):0===e.indexOf(\"API Version:\")&&(this.version.api=parseInt(e.substr(13),10),this.interesting=!0)}}},{key:\"parseRegion\",value:function(){if(\"FrontEnd:Display\"===this.moduleName){var e=this.fullLine.substr(48),a=e.match(/appid is [\\d]+, using url https?:\\/\\/clientweb-([^\\.]+).theculling.net\\/api/i);if(a){this.interesting=!0;var t=a[1];n.isRegionsType(t)?this.region=t:this.region=\"unknown\"}}}},{key:\"parseGameState\",value:function(){if(\"LogOnline\"===this.moduleName){var e=this.fullLine.substr(41);e.indexOf(\"GotoState: NewState: Playing\")!==-1?this.isGameStart=!0:e.indexOf(\"GotoState: NewState: MainMenu\")!==-1&&(this.isGameEnd=!0)}}},{key:\"parseGameType\",value:function(){if(\"LogNet\"===this.moduleName){var e=this.fullLine.substr(38);if(e.indexOf(\"Welcomed by server\")!==-1){var a=e.match(/\\(Level: \\/Game\\/Maps\\/([^,]+), Game: \\/Game\\/Blueprints\\/GameMode\\/([^\\)]+)\\)/i);if(!a)return void console.warn(\"culling-log-parser: WARNING! Found a server welcome that didn't match expected format\",this.fullLine);this.interesting=!0;var t=r[a[2]];t||(console.warn(\"culling-log-parser: WARNING! Found an unknown game mode.\",a[2],this.fullLine),t=\"unknown\"),this.gameType={game:t,level:a[1]}}}}},{key:\"parseDamage\",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(\"VictoryDamage:Display\"===this.moduleName){var a=this.fullLine.substr(53),t=a.match(/You hit (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i);if(t||(this.damage.isDealt=!1,this.damage.isReceived=!0,t=a.match(/Struck by (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i)),!t)return void console.error(\"VictoryDamage:Display with wrong format\",a);if(this.interesting=!0,this.otherPlayer=t[1],e&&this.otherPlayer.match(/<BOT>[\\d]-[A-F0-9]{32}/))return void(this.interesting=!1);this.date&&(this.damage.timestamp=this.date.getTime());var i=parseInt(t[2],10);this.damage.isDealt?this.damage.dealt=i:this.damage.received=i,this.damage.range=parseInt(t[3],10),this.damage.range>3&&(this.damage.isRanged=!0,this.damage.range>300&&(this.damage.isAFK=!0));var s=a.match(/BLOCKED ([\\d]+)%/i);s&&(this.damage.isBlocked=!0,this.damage.block=parseInt(s[1],10),50===this.damage.block?this.damage.isRanged=!0:100!==this.damage.block&&25!==this.damage.block&&console.info(\"culling-log-parser: Found abnormal block value!\",s[1],this.fullLine)),a.match(\"BACKSTAB!\")&&(this.damage.isBackstab=!0),a.match(\"HEADSHOT!\")&&(this.damage.isHeadshot=!0)}}},{key:\"parseRankScoring\",value:function(){if(\"LogOnline:Warning\"===this.moduleName){var e=this.fullLine.substr(49),a=e.match(/RankScoring (win|loss|kill|death): (-?[\\d]+)/i);if(a)switch(this.interesting=!0,this.score=parseInt(a[2],10),a[1]){case\"win\":this.isWin=!0;break;case\"loss\":this.isLoss=!0;break;case\"kill\":this.isKill=!0;break;case\"death\":this.isDeath=!0;break;default:console.error(\"Found unknown RankScoring value:\"+e)}}}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=o},function(e,a,t){\"use strict\";var i=t(2),s=t(0);a.DamageSummary=s[\"default\"];var n=t(3);a.makeCloneable=n[\"default\"];var r=t(1);a.ICullingParser=r,Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=i[\"default\"]}])});\n//# sourceMappingURL=index.es5.js.map\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// worker.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 169);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fa8d5e5ef265c2718b35","\"use strict\";\nvar culling_log_parser_1 = require('culling-log-parser');\n// fake loading bar 4Head\nvar fakeProgress = 0;\nfunction fakeProgressIncrementor() {\n    var remaining = 100 - fakeProgress;\n    fakeProgress += remaining * 0.01;\n    return fakeProgress;\n}\n;\nfunction handleFile(file, progressHandler, successHandler, errorHandler) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onprogress = function (progressEvent) {\n        var progress = 0;\n        if (progressEvent.lengthComputable) {\n            progress = progressEvent.loaded / progressEvent.total * 100;\n        }\n        else {\n            // fake it!\n            console.log('Faking progress');\n            progress = fakeProgressIncrementor();\n        }\n        progress = progress / 2; // divide by two, because these events only count for the filereading itself for now\n        progressHandler.call(reader, progress);\n    };\n    reader.onload = function (event) {\n        var result = void 0;\n        try {\n            result = culling_log_parser_1.default(reader.result, { ignoreBots: true });\n        }\n        catch (e) {\n            errorHandler.call(reader, e);\n            return;\n        }\n        successHandler.call(reader, result);\n    };\n    reader.onerror = errorHandler;\n}\nfunction fastConcat(array, otherArray) {\n    otherArray.forEach(function (v) {\n        return array.push(v);\n    });\n}\nonmessage = function onmessage(event) {\n    var files = event.data;\n    var totalResult = {\n        end: new Date(0),\n        entries: [],\n        games: [],\n        meta: {\n            lines: {\n                relevant: 0,\n                total: 0\n            }\n        },\n        players: {},\n        start: new Date(),\n        summary: {\n            damage: new culling_log_parser_1.DamageSummary(),\n            deaths: 0,\n            kills: 0,\n            losses: 0,\n            wins: 0\n        }\n    };\n    var fileSerialHandler = function fileSerialHandler(index) {\n        var arrayProgress = index / files.length * 100;\n        handleFile(files[index], function (progress) {\n            postMessage({\n                progress: arrayProgress + progress / files.length,\n                type: 'progress'\n            });\n        }, function (output) {\n            try {\n                var beforeLast = false;\n                if (output.start < totalResult.start) {\n                    totalResult.start = output.start;\n                    beforeLast = true;\n                }\n                if (output.end > totalResult.end) {\n                    if (index > 0 && beforeLast) {\n                        console.warn('A log file was before and after the already parsed output.', files[index - 1].name, 'output.end', output.end, 'output.start', output.start, 'totalResult.end', totalResult.end, 'totalResult.start', totalResult.start);\n                    }\n                    totalResult.end = output.end;\n                }\n                fastConcat(totalResult.entries, output.entries);\n                fastConcat(totalResult.games, output.games);\n                totalResult.meta.lines.relevant += output.meta.lines.relevant;\n                totalResult.meta.lines.total += output.meta.lines.total;\n                Object.keys(output.players).forEach(function (name) {\n                    var player = totalResult.players[name];\n                    if (!player) {\n                        player = output.players[name];\n                    }\n                    else {\n                        player.damage = player.damage.addOtherSummary(output.players[name].damage);\n                        player.killed += output.players[name].killed;\n                        player.died += output.players[name].died;\n                        player.timesMet += output.players[name].timesMet;\n                    }\n                });\n                totalResult.summary.damage = totalResult.summary.damage.addOtherSummary(output.summary.damage);\n                totalResult.summary.deaths += output.summary.deaths;\n                totalResult.summary.kills += output.summary.kills;\n                totalResult.summary.losses += output.summary.losses;\n                totalResult.summary.wins += output.summary.wins;\n                index++;\n                if (files[index]) {\n                    // get more files\n                    fileSerialHandler(index);\n                }\n                else {\n                    postMessage({\n                        output: culling_log_parser_1.makeCloneable(totalResult),\n                        type: 'done'\n                    });\n                }\n            }\n            catch (error) {\n                postMessage({\n                    error: error.message,\n                    stack: error.stack,\n                    type: 'error'\n                });\n            }\n        }, function (error) {\n            console.log('Posting error');\n            postMessage({\n                error: error.message,\n                stack: error.stack,\n                type: 'error'\n            });\n        });\n    };\n    fileSerialHandler(0);\n    postMessage({\n        type: 'started'\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/worker/index.ts","!function(e,a){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=a():\"function\"==typeof define&&define.amd?define([],a):\"object\"==typeof exports?exports[\"culling-log-parser\"]=a():e[\"culling-log-parser\"]=a()}(this,function(){return function(e){function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}var t={};return a.m=e,a.c=t,a.i=function(e){return e},a.d=function(e,a,t){Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p=\"\",a(a.s=6)}([function(e,a){\"use strict\";function t(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),s=function(){function e(){t(this,e),this.amount=0,this.averageRange=0,this.count=0,this.rangeSum=0,this.backstabCount=0,this.meleeBlockCount=0,this.rangeBlockCount=0,this.rangeBlockAmount=0}return i(e,[{key:\"addDamage\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],a=arguments[1];a.isBlocked||(this.count++,this.amount+=e),this.rangeSum+=a.range,this.count>0&&(this.averageRange=this.rangeSum/this.count),a.isBackstab&&this.backstabCount++,a.isBlocked&&(a.isRanged?(this.rangeBlockAmount+=e*(a.block/100),this.rangeBlockCount++):this.meleeBlockCount++)}},{key:\"addOtherSubSummary\",value:function(a){var t=new e;return t.amount=this.amount+a.amount,t.count=this.count+a.count,this.count>0||a.count>0?t.averageRange=(this.rangeSum+a.rangeSum)/(this.count+a.count):t.averageRange=0,t.backstabCount=this.backstabCount+a.backstabCount,t.meleeBlockCount=this.meleeBlockCount+a.meleeBlockCount,t.rangeBlockAmount=this.rangeBlockAmount+a.rangeBlockAmount,t.rangeBlockCount=this.rangeBlockCount+a.rangeBlockCount,t}}]),e}(),n=function(){function e(){t(this,e),this.summaries={afk:{dealt:new s,received:new s},melee:{dealt:new s,received:new s},ranged:{dealt:new s,received:new s}}}return i(e,[{key:\"add\",value:function(e){var a=this.summaries.melee;e.isRanged&&(a=e.isAFK?this.summaries.afk:this.summaries.ranged);var t=a.dealt,i=e.dealt;e.isReceived&&(t=a.received,i=e.received),t.addDamage(i,e)}},{key:\"addOtherSummary\",value:function(a){var t=new e;return t.summaries={afk:{dealt:this.summaries.afk.dealt.addOtherSubSummary(a.summaries.afk.dealt),received:this.summaries.afk.received.addOtherSubSummary(a.summaries.afk.received)},melee:{dealt:this.summaries.melee.dealt.addOtherSubSummary(a.summaries.melee.dealt),received:this.summaries.melee.received.addOtherSubSummary(a.summaries.melee.received)},ranged:{dealt:this.summaries.ranged.dealt.addOtherSubSummary(a.summaries.ranged.dealt),received:this.summaries.ranged.received.addOtherSubSummary(a.summaries.ranged.received)}},t}},{key:\"getSummary\",value:function(){var e=this.summaries.melee.dealt.addOtherSubSummary(this.summaries.ranged.dealt);e=e.addOtherSubSummary(this.summaries.afk.dealt);var a=this.summaries.melee.received.addOtherSubSummary(this.summaries.ranged.received);a=a.addOtherSubSummary(this.summaries.afk.received);var t=e.count+a.count,i=e.rangeSum+a.rangeSum,s=Object.assign({},this.summaries,{averageRange:i/t},{dealt:e,received:a});return s}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=n},function(e,a){\"use strict\";function t(e){return i.indexOf(e)!==-1}var i=[\"eu\",\"us-east\",\"us-west\",\"ocn\"];a.isRegionsType=t},function(e,a,t){\"use strict\";function i(e){var a=arguments.length<=1||void 0===arguments[1]?{ignoreBots:!1}:arguments[1],t=[],i={end:new Date,entries:[],games:[],meta:{lines:{relevant:0,total:0}},players:{},start:new Date,summary:{damage:new s[\"default\"],deaths:0,kills:0,losses:0,wins:0}},u=!1,l=new r[\"default\"],m=\"\",d=0,h=e.split(\"\\n\");return h.forEach(function(e,h){i.meta.lines.total++;var c=new n[\"default\"](e);if(t.indexOf(c.moduleName)===-1&&t.push(c.moduleName),c.parse(a),!u&&c.date&&(u=!0,i.start=c.date),c.date&&(i.end=c.date),c.interesting){if(i.meta.lines.relevant++,0!==c.version.api)return d=c.version.api,void(o.indexOf(c.version.api)||console.warn(\"culling-log-parser: WARNING! This log is from a game version that has not been tested!\",c.version.api));if(\"\"===c.version.game){if(0===d&&c.isGameStart&&console.warn(\"culling-log-parser: WARNING! This log does not appear to have a recognized version line.\"),c.region&&(m=c.region),c.isKill&&i.summary.kills++,c.isDeath&&i.summary.deaths++,c.isWin&&i.summary.wins++,c.isLoss&&i.summary.losses++,c.damage.isBlocked&&c.damage.isBackstab&&console.warn(\"culling-log-parser: WARNING! Someone blocked a backstab?!?!?!?!\"),c.damage.isBlocked&&c.damage.isAFK&&console.info(\"culling-log-parser: Someone blocked a damage instance from stupid range. Rare but can happen.\"),i.summary.damage.add(c.damage),l.addEntry(c),l.isFinished){var g=l.getResult();Object.keys(g.players).forEach(function(e){i.players[e]||(i.players[e]={damage:new s[\"default\"],died:0,killed:0,timesMet:0}),i.players[e].damage=i.players[e].damage.addOtherSummary(l.players[e]),i.players[e].timesMet++}),i.games.push(g),l=new r[\"default\"](m)}i.entries.push(c)}}}),l.start&&!l.isFinished&&(l.finish(i.entries[i.entries.length-1]),i.games.push(l.getResult())),i}var s=t(0),n=t(5),r=t(4),o=[];Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=i},function(e,a){\"use strict\";function t(e){var a={entries:e.entries,games:e.games,meta:e.meta,players:{},summary:{damage:e.summary.damage.getSummary(),deaths:e.summary.deaths,kills:e.summary.kills,losses:e.summary.losses,wins:e.summary.wins}};return Object.keys(e.players).forEach(function(t){a.players[t]={damage:e.players[t].damage.getSummary(),died:e.players[t].died,killed:e.players[t].killed,timesMet:e.players[t].timesMet}}),a}Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=t},function(e,a,t){\"use strict\";function i(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),n=t(0),r=function(){function e(){var a=arguments.length<=0||void 0===arguments[0]?\"\":arguments[0];i(this,e),this.start=null,this.end=null,this.players={},this.damageSummary=new n[\"default\"],this.damageInstances=[],this.isWin=!1,this.isFinished=!1,this.deathWaitingForDamage=!1,this.type=\"custom\",this.region=a}return s(e,[{key:\"addEntry\",value:function(e){e.isGameStart&&(this.start=e.date||new Date),this.addDamage(e),\"custom\"!==e.gameType.game&&(this.type=e.gameType.game),e.region&&(this.region=e.region),this.deathWaitingForDamage&&e.damage.isReceived?this.finish(e):e.isWin?(this.isWin=!0,this.finish(e)):e.isDeath?this.deathWaitingForDamage=!0:e.isGameEnd&&this.finish(e)}},{key:\"addDamage\",value:function(e){(e.damage.dealt||e.damage.received||e.damage.isBlocked)&&(this.damageSummary.add(e.damage),this.players[e.otherPlayer]||(this.players[e.otherPlayer]=new n[\"default\"]),this.players[e.otherPlayer].add(e.damage),this.damageInstances.push(Object.assign({name:e.otherPlayer},e.damage)))}},{key:\"finish\",value:function(e){e.date&&(this.end=e.date),isNaN(e.score)||(this.score=e.score),this.isFinished=!0}},{key:\"getResult\",value:function(){var e=Object.keys(this.players),a={},t=!0,i=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;a[o]={damage:this.players[o].getSummary(),died:!1,killed:!1}}}catch(u){i=!0,s=u}finally{try{!t&&r[\"return\"]&&r[\"return\"]()}finally{if(i)throw s}}return{damageInstances:this.damageInstances,damageSummary:this.damageSummary.getSummary(),end:this.end,isWin:this.isWin,mode:this.type,players:a,region:this.region,score:this.score,start:this.start}}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=r},function(e,a,t){\"use strict\";function i(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),n=t(1),r={\"VictoryGameMode_Solo.VictoryGameMode_Solo_C\":\"solo\",\"VictoryGameMode.VictoryGameMode_C\":\"team\",\"VictoryGameMode_Lightning.VictoryGameMode_Lightning_C\":\"lightning\",\"VictoryGameMode_Custom.VictoryGameMode_Custom_C\":\"custom\",\"VictoryGameMode_TrialsSolo.VictoryGameMode_TrialsSolo_C\":\"trials\"},o=function(){function e(a){i(this,e),this.fullLine=a,this.damage={block:0,dealt:0,isAFK:!1,isBackstab:!1,isBlocked:!1,isHeadshot:!1,isRanged:!1,isReceived:!1,isDealt:!0,range:0,received:0,timestamp:0},this.isGameStart=!1,this.isGameEnd=!1,this.isWin=!1,this.isLoss=!1,this.otherPlayer=\"\",this.isKill=!1,this.isDeath=!1,this.score=0,this.region=\"\",this.version={api:0,game:\"\"},this.gameType={game:\"custom\",level:\"\"},this.interesting=!1,this.date=this.parseDate(),this.moduleName=this.parseModuleName()}return s(e,[{key:\"parse\",value:function(e){this.parseVersion(),this.parseRegion(),this.parseGameState(),this.parseGameType(),this.parseDamage(e.ignoreBots),this.parseRankScoring()}},{key:\"parseDate\",value:function(){if(!this.fullLine.match(/^\\[[\\d\\.\\-:]+]/))return null;var e=this.fullLine.substr(1,4),a=this.fullLine.substr(6,2),t=this.fullLine.substr(9,2),i=this.fullLine.substr(12,2),s=this.fullLine.substr(15,2),n=this.fullLine.substr(18,2),r=this.fullLine.substr(21,3);return new Date(e+\"-\"+a+\"-\"+t+\"T\"+i+\":\"+s+\":\"+n+\".\"+r+\"Z\")}},{key:\"parseModuleName\",value:function(){var e=this.fullLine;this.date&&(e=e.substr(30));var a=e.match(/^[^\\s]+/);if(!a)return\"NoModuleFound\";var t=a[0].replace(/:$/,\"\");return t}},{key:\"parseVersion\",value:function(){if(\"LogInit\"===this.moduleName){var e=this.fullLine.substr(9);0===e.indexOf(\"Version:\")?(this.version.game=e.substr(18),this.interesting=!0):0===e.indexOf(\"API Version:\")&&(this.version.api=parseInt(e.substr(13),10),this.interesting=!0)}}},{key:\"parseRegion\",value:function(){if(\"FrontEnd:Display\"===this.moduleName){var e=this.fullLine.substr(48),a=e.match(/appid is [\\d]+, using url https?:\\/\\/clientweb-([^\\.]+).theculling.net\\/api/i);if(a){this.interesting=!0;var t=a[1];n.isRegionsType(t)?this.region=t:this.region=\"unknown\"}}}},{key:\"parseGameState\",value:function(){if(\"LogOnline\"===this.moduleName){var e=this.fullLine.substr(41);e.indexOf(\"GotoState: NewState: Playing\")!==-1?this.isGameStart=!0:e.indexOf(\"GotoState: NewState: MainMenu\")!==-1&&(this.isGameEnd=!0)}}},{key:\"parseGameType\",value:function(){if(\"LogNet\"===this.moduleName){var e=this.fullLine.substr(38);if(e.indexOf(\"Welcomed by server\")!==-1){var a=e.match(/\\(Level: \\/Game\\/Maps\\/([^,]+), Game: \\/Game\\/Blueprints\\/GameMode\\/([^\\)]+)\\)/i);if(!a)return void console.warn(\"culling-log-parser: WARNING! Found a server welcome that didn't match expected format\",this.fullLine);this.interesting=!0;var t=r[a[2]];t||(console.warn(\"culling-log-parser: WARNING! Found an unknown game mode.\",a[2],this.fullLine),t=\"unknown\"),this.gameType={game:t,level:a[1]}}}}},{key:\"parseDamage\",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(\"VictoryDamage:Display\"===this.moduleName){var a=this.fullLine.substr(53),t=a.match(/You hit (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i);if(t||(this.damage.isDealt=!1,this.damage.isReceived=!0,t=a.match(/Struck by (.*) for (-?[\\d\\.]+) damage \\(([\\d\\.]+)\\ m\\)/i)),!t)return void console.error(\"VictoryDamage:Display with wrong format\",a);if(this.interesting=!0,this.otherPlayer=t[1],e&&this.otherPlayer.match(/<BOT>[\\d]-[A-F0-9]{32}/))return void(this.interesting=!1);this.date&&(this.damage.timestamp=this.date.getTime());var i=parseInt(t[2],10);this.damage.isDealt?this.damage.dealt=i:this.damage.received=i,this.damage.range=parseInt(t[3],10),this.damage.range>3&&(this.damage.isRanged=!0,this.damage.range>300&&(this.damage.isAFK=!0));var s=a.match(/BLOCKED ([\\d]+)%/i);s&&(this.damage.isBlocked=!0,this.damage.block=parseInt(s[1],10),50===this.damage.block?this.damage.isRanged=!0:100!==this.damage.block&&25!==this.damage.block&&console.info(\"culling-log-parser: Found abnormal block value!\",s[1],this.fullLine)),a.match(\"BACKSTAB!\")&&(this.damage.isBackstab=!0),a.match(\"HEADSHOT!\")&&(this.damage.isHeadshot=!0)}}},{key:\"parseRankScoring\",value:function(){if(\"LogOnline:Warning\"===this.moduleName){var e=this.fullLine.substr(49),a=e.match(/RankScoring (win|loss|kill|death): (-?[\\d]+)/i);if(a)switch(this.interesting=!0,this.score=parseInt(a[2],10),a[1]){case\"win\":this.isWin=!0;break;case\"loss\":this.isLoss=!0;break;case\"kill\":this.isKill=!0;break;case\"death\":this.isDeath=!0;break;default:console.error(\"Found unknown RankScoring value:\"+e)}}}}]),e}();Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=o},function(e,a,t){\"use strict\";var i=t(2),s=t(0);a.DamageSummary=s[\"default\"];var n=t(3);a.makeCloneable=n[\"default\"];var r=t(1);a.ICullingParser=r,Object.defineProperty(a,\"__esModule\",{value:!0}),a[\"default\"]=i[\"default\"]}])});\n//# sourceMappingURL=index.es5.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../culling-log-parser/dist/index.es5.js\n// module id = 85\n// module chunks = 1"],"sourceRoot":""}